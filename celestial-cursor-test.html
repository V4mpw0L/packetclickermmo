<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Celestial Cursor Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a2e;
            color: white;
            padding: 20px;
            margin: 0;
        }

        .test-container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .click-btn {
            width: 120px;
            height: 120px;
            border: 3px solid #00ff80;
            border-radius: 50%;
            background: linear-gradient(135deg, #0f3460, #16213e);
            color: white;
            font-weight: bold;
            font-size: 16px;
            margin: 20px;
            display: inline-block;
            line-height: 114px;
            text-align: center;
            user-select: none;
            transition: all 0.2s ease;
        }

        .click-btn:hover {
            transform: scale(1.05);
            border-color: #ff0080;
        }

        .combo-display {
            font-size: 24px;
            margin: 20px;
            padding: 10px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            border: 1px solid #333;
        }

        .celestial {
            animation: celestialBorder 3s linear infinite;
        }

        @keyframes celestialBorder {
            0% { border-color: #ff0080; }
            25% { border-color: #00ff80; }
            50% { border-color: #8000ff; }
            75% { border-color: #ff8000; }
            100% { border-color: #ff0080; }
        }

        .controls {
            margin: 20px 0;
        }

        button {
            padding: 10px 20px;
            margin: 5px;
            background: #0066cc;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        button:hover {
            background: #0088ff;
        }

        .status {
            margin: 20px 0;
            padding: 15px;
            background: rgba(0,255,128,0.1);
            border: 1px solid #00ff80;
            border-radius: 8px;
        }

        .warning {
            background: rgba(255,128,0,0.1);
            border-color: #ff8000;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ðŸš€ Celestial Cursor Test</h1>
        <p></p>This test verifies that the CELESTIAL combo (500+ clicks) makes the button cursor randomly change between all available types.</p>

        <div class="combo-display">
            <span id="combo-text">Combo: <span id="combo-count">0</span></span>
        </div>

        <div id="click-btn" class="click-btn">
            CLICK ME
        </div>

        <div class="controls">
            <button onclick="setCombo(0)">Reset Combo</button>
            <button onclick="setCombo(4)">Set to 4</button>
            <button onclick="setCombo(50)">Set to 50 (Ultra)</button>
            <button onclick="setCombo(200)">Set to 200 (Animal)</button>
            <button onclick="setCombo(500)">Set to 500 (CELESTIAL)</button>
            <button onclick="setCombo(1000)">Set to 1000 (CELESTIAL)</button>
        </div>

        <div id="status" class="status">
            <strong>Status:</strong> <span id="status-text">Ready to test</span>
        </div>

        <div class="status warning">
            <strong>Instructions:</strong><br>
            1. Click "Set to 500 (CELESTIAL)" to trigger celestial mode<br>
            2. Watch the button cursor - it should randomly change every 300ms<br>
            3. Test other combo levels to ensure normal behavior<br>
            4. Reset combo to verify cleanup works properly
        </div>
    </div>

    <script>
        // Simulate the game's cursor system
        let celestialCursorInterval = null;
        const celestialCursorTypes = [
            "src/assets/green.webp",
            "src/assets/gold.webp",
            "src/assets/blue.webp",
            "src/assets/pink.webp",
            "src/assets/animal.webp"
        ];

        let currentCombo = 0;

        function setCursorForCombo(combo) {
            try {
                const btn = document.getElementById("click-btn");
                if (!btn) return;

                // Clear any existing celestial interval
                if (celestialCursorInterval) {
                    clearInterval(celestialCursorInterval);
                    celestialCursorInterval = null;
                }

                let file = "src/assets/green.webp"; // default

                if (combo >= 500) {
                    // CELESTIAL: Start random cursor changing
                    const randomizeCursor = () => {
                        const randomFile = celestialCursorTypes[
                            Math.floor(Math.random() * celestialCursorTypes.length)
                        ];
                        btn.style.cursor = `url("${randomFile}") 6 0, pointer`;
                        btn.dataset.cursorImage = randomFile;

                        // Update status to show current cursor
                        const fileName = randomFile.split('/').pop().replace('.webp', '');
                        updateStatus(`CELESTIAL: Using ${fileName} cursor (changes every 300ms)`);
                    };

                    // Set initial random cursor
                    randomizeCursor();

                    // Change cursor every 300ms for celestial effect
                    celestialCursorInterval = setInterval(randomizeCursor, 300);

                    // Add celestial visual effect
                    btn.classList.add('celestial');
                    return; // Exit early for celestial
                } else {
                    // Remove celestial visual effect
                    btn.classList.remove('celestial');

                    if (combo >= 200) file = "src/assets/animal.webp";
                    else if (combo >= 50) file = "src/assets/pink.webp";
                    else if (combo >= 15) file = "src/assets/blue.webp";
                    else if (combo >= 5) file = "src/assets/gold.webp";
                    else file = "src/assets/green.webp";
                }

                // hotspot x=6 y=0 for pointer
                btn.style.cursor = `url("${file}") 6 0, pointer`;
                btn.dataset.cursorImage = file;

                // Update status
                const fileName = file.split('/').pop().replace('.webp', '');
                const tier = combo >= 200 ? 'Animal' : combo >= 50 ? 'Ultra' : combo >= 15 ? 'Mega' : combo >= 5 ? 'Super' : 'Normal';
                updateStatus(`${tier}: Using ${fileName} cursor (static)`);

            } catch (error) {
                updateStatus(`Error: ${error.message}`, true);
            }
        }

        function setCombo(combo) {
            currentCombo = combo;
            document.getElementById('combo-count').textContent = combo;
            setCursorForCombo(combo);
        }

        function updateStatus(message, isError = false) {
            const statusEl = document.getElementById('status');
            const statusTextEl = document.getElementById('status-text');
            statusTextEl.textContent = message;

            if (isError) {
                statusEl.className = 'status warning';
            } else {
                statusEl.className = 'status';
            }
        }

        // Add click handler to button
        document.getElementById('click-btn').addEventListener('click', function() {
            updateStatus(`Button clicked! Current combo: ${currentCombo}`);
        });

        // Initialize
        setCombo(0);

        // Test celestial cursor automatically after 2 seconds
        setTimeout(() => {
            updateStatus("Auto-testing: Setting combo to 500 in 3 seconds...");
            setTimeout(() => {
                setCombo(500);
            }, 3000);
        }, 2000);
    </script>
</body>
</html>
